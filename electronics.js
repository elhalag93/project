
var products = {
    1 : {
      name : "Dell 5583 CI7",
      desc : "8565U 15.6 inch",
      img : "Laptops/dell-5583-ci7-8565u-laptop-15-6-inch.png",
      price : 15199,
    },
    2 : {
      name : "Dell 3590 CI7",
      desc : "9750H 15.6 inch",
      img : "laptops/dell-3590-ci7-9750h-laptop-15-6-inch-228x228.jpg",
      price : 20499,
    },
    3 : {
      name : "HP CI3",
      desc : "7020U 15.6 inch",
      img : "laptops/lenovo-s145-15iwl-ci5-8265u-laptop-15-6-inch-228x228.jpg",
      price : 5899,
    },
    4 : {
      name : "Hp ProBook CI5",
      desc : "8265U 15.6 inch",
      img : "laptops/hp-probook-450-g6-ci5-8265u-laptop-15-6-inch-228x228.png",
      price : 10899,
    },
    5 : {
        name : "Lenovo CI7",
        desc : "8750H 15.6 inch",
        img : "laptops/lenovo-330-15ich-ci7-8750h-laptop-15-6-inch-228x228.jpg",
        price : 15399,
      },
    6 : {
        name : "Lenovo CI3  ",
        desc : "8145U 14 inch",
        img : "laptops/lenovo-c340-14iwl-ci3-8145u-laptop-14-inch-228x228.jpg",
        price : 9299,
      },
    7 : {
        name : "Hp ProBook CI5",
        desc : "8265U 15.6 inch",
        img : "laptops/lenovo-ideapad-330-15ast-laptop-15-6-inch-blue-228x228.jpeg",
        price : 3499,
      },
    8 : {
        name : "Dell 5590 CI7",
        desc : "9750H 15.6 inch",
        img : "laptops/dell-5590-ci7-9750h-laptop-15-6-inch-228x228.jpg",
        price : 24499,
      },



      9: {
        name : "iPhone 11 with FaceTime",
        desc : "64GB - White",
        img : "mobiles/apple_iphone_11-_white_2.jpg",
        price : 13777,
      },
      10 : {
        name : "Galaxy Note10",
        desc : "6.3-inch 256GB Dual SIM 4G Mobile Phone",
        img : "mobiles/1.jpg",
        price : 14139,
      },
      11 : {
        name : "Galaxy A30s ",
        desc : "6.4-inch 4GB Dual SIM 4G Mobile Phone",
        img : "mobiles/1 (1).jpg",
        price : 3899,
      },
      12: {
        name : "Galaxy A70",
        desc : "6.7-inch 6GB Dual SIM 4G Mobile Phone",
        img : "mobiles/1 (2).jpg",
        price : 5399,
      },
      13: {
        name : "F11 Pro",
        desc : "6.53-inch 6GB Mobile Phone - Thunder Black",
        img : "mobiles/1 (3).jpg",
        price : 4399,
      },
      14 : {
        name : "XIAOMI Mi 9",
        desc : "6.39-inch 6GB Dual SIM - Lavender Violet",
        img : "mobiles/1 (4).jpg",
        price : 7777,
      },
      15: {
        name : "NOKIA 2.1",
        desc : "5.5-inch 8GB Dual SIM - Blue/Copper",
        img : "mobiles/1 (5).jpg",
        price : 2499,
      },
      16: {
        name : "HONOR 9X ",
        desc : "6.59-inch 128GB/6GB  Dual SIM - Sapphire Blue",
        img : "mobiles/1 (6).jpg",
        price : 3790,
      },
      17: {
        name : "NILKIN Buds GO Pro TWS",
        desc : "Bluetooth Earphones - Black",
        img : "headphones/1 (8).jpg",
        price :998,
      },
      18 : {
        name : "GENERIC 3.5mm Wired Gaming",
        desc : "Ear Sports Headphones",
        img : "headphones/1.jpg",
        price : 51,
      },
      19 : {
        name : "TWA I12 Double Earphones ",
        desc : "Wireless Bluetooth Touch - Black",
        img : "headphones/1 (1).jpg",
        price : 348,
      },
      20 : {
        name : "GENERIC I13 Double ",
        desc : "Touch Wireless Bluetooth - White  ",
        img : "headphones/1 (2).jpg",
        price : 299,
      },
      21 : {
        name : "Dell 5590 CI7",
        desc : "9750H 15.6 inch",
        img : "laptops/dell-5590-ci7-9750h-laptop-15-6-inch-228x228.jpg",
        price : 24499
      },
      22 : {
        name : "SH-S1 Headphone MP3 Player ",
        desc : "Foldable Over Ear Headset 3.5mm ",
        img : "headphones/1 (3).jpg",
        price :228
      },
    
      23 : {
        name : "Type-C Line Control Earphone",
        desc : "With Mic High-quality Lossless  ",
        img : "headphones/1 (4).jpg",
        price :34
      },
    24 : {
        name : "S70 High Fidelity Music Earphone",
        desc : "With Mic 3.5mm Jack - Red ",
        img : "headphones/1 (5).jpg",
        price : 64
      },
      25: {
        name : "SAMSUMG UA70RU7100",
        desc : "  70-inch HDR Flat 4K UHD Smart TV",
        img : "TVs/1 (7).jpg",
        price : 14199
      },

      26 : {
        name : "HOHO 24 Inch FHD LED TV  ",
        desc : " Piano Black ",
        img : "TVs/1 (1).jpg",
        price : 1199
      },
      27: {
        name : "JAC 32N",
        desc : "32-inch HD LED TV with IPS Panel ",
        img : "TVs/1 (2).jpg",
        price : 1399
      },
      28: {
        name : "LG 55UK6300PVB",
        desc : "55-inch 4K UHD Smart TV",
        img : "TVs/1 (4).jpg",
        price : 6777
      },
      29: {
        name : "SAMSUNG UA43N5300",
        desc : "43-inch Smart TV With Built-In Receiver",
        img : "TVs/1.jpg",
        price : 4499
      },
      30: {
        name : "JAC 155ASS",
        desc : "55-inch  UHD 4K LED Samrt TV",
        img : "TVs/1 (3).jpg",
        price : 4799
      },
      31: {
        name : "SAMSUNG UA49N5300",
        desc : " 49-inch Full HD Smart TV",
        img : "TVs/1 (5).jpg",
        price :5499
      },
      32: {
        name : "UNIONAIRE L32UR42G ",
        desc : "32 Inch HD TV  ",
        img : "TVs/1 (6).jpg",
        price : 1499
      },   
  };

  window.addEventListener("load", function(){
    var container = document.getElementById("cart-products"),
        item = null, part = null;
    for (let i in products) {
      item = document.createElement("div");
      item.classList.add("p-item");
  
      // Product Image
      part = document.createElement("img");
      part.src = products[i]['img'];
      part.classList.add("p-img");
      item.appendChild(part);
  
      // Product Name
      part = document.createElement("div");
      part.innerHTML = products[i].name;
      part.classList.add("p-name");
      item.appendChild(part);
  
      // Product Price
      part = document.createElement("div");
      part.innerHTML = "EGP" + products[i]['price'];
      part.classList.add("p-price");
      item.appendChild(part);
  
      // Product Description
      part = document.createElement("div");
      part.innerHTML = products[i]['desc'];
      part.classList.add("p-desc");
      item.appendChild(part);
  
      // Add to cart
      part = document.createElement("input");
      part.type = "button";
      part.value = "Add to Cart";
      part.classList.add("p-add");
      part.onclick = cart.add;
      
      part.dataset.id = i;
      item.appendChild(part);
  
      container.appendChild(item);
    }
  });

  /* cart */

  var cart = {
    data : null, 

    save : function(){
      localStorage.setItem("cart", JSON.stringify(cart.data));
    },
    
    load : function(){
      cart.data = localStorage.getItem("cart");
      if (cart.data == null) { cart.data = {}; }
      else { cart.data = {}; }
    },
  
  
    add : function(){
      if (cart.data[this.dataset.id] == undefined) {
        var product = products[this.dataset.id];
        cart.data[this.dataset.id] = {
          name : product['name'],
          desc : product['desc'],
          img : product['img'],
          price : product['price'],
          qty : 1
        };
      } else {
        cart.data[this.dataset.id]['qty']++;
      }
      cart.save();
      cart.list();
    },
  
    list : function(){
    
  
      var container = document.getElementById("cart-list"),
          item = null, part = null, product = null;
      container.innerHTML = "";
  
      
      var isempty = function(obj){
        for (var key in obj) {
          if(obj.hasOwnProperty(key)) { return false; }
        }
        return true;
      };
      if (isempty(cart.data)) {
        item = document.createElement("div");
        item.innerHTML = "Cart is empty";
        container.appendChild(item);
      }
      else {
        var total = 0, subtotal = 0;
        for (var i in cart.data) {
          item = document.createElement("div");
          item.classList.add("c-item");
          product = cart.data[i];

          part = document.createElement("span");
          part.innerHTML = product['name'];
          part.classList.add("c-name");
          item.appendChild(part);


          part = document.createElement("input");
          part.type = "number";
          part.value = product['qty'];
          part.dataset.id = i;
          part.classList.add("c-qty");
          part.addEventListener("change", cart.change);
          item.appendChild(part);
                
          subtotal = product['qty'] * product['price'];
          total += subtotal;
          container.appendChild(item);
        }


        item = document.createElement("input");
        item.type = "button";
        item.value = "Empty";
        item.addEventListener("click",cart.reset);
        item.classList.add("c-empty");
        container.appendChild(item);
        
        item = document.createElement("input");
        item.type = "button";
        item.value = "Checkout - " + "EGP" + total;
        item.addEventListener("click", cart.checkout);
        item.classList.add("c-checkout");
        container.appendChild(item);
      }
    },

    reset : function(){ 
        if (confirm("Empty cart?")) {
          cart.data = {};
          cart.save();
          cart.list();
        }
      },

    change : function(){  
      if (this.value == 0) {
        delete cart.data[this.dataset.id];
      } else {
        cart.data[this.dataset.id]['qty'] = this.value;
      }
      cart.save();
      cart.list();
    },

    checkout : function(){
      alert("Done");
    }
  };
  
  window.addEventListener("load", function(){
    cart.load();
    cart.list();
  });